import{c as j,r as t,w as H,j as e,A as P,M as B,X as b}from"./index-DR4EWznf.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],U=j("minimize-2",L),I=()=>{const[s,f]=t.useState(()=>!(typeof navigator<"u"&&navigator.webdriver)),[r,A]=t.useState(()=>localStorage.getItem("nahan_perf_hud_mode")==="compact"?"compact":"full"),[l,g]=t.useState(0),h=t.useRef(Date.now()),[i,w]=t.useState(60),d=t.useRef(0),x=t.useRef(Date.now()),[a,v]=t.useState({storageQueueLength:0,processingQueueLength:0,activeTasks:0}),[m,C]=t.useState(0);t.useEffect(()=>{localStorage.setItem("nahan_perf_hud_mode",r)},[r]),t.useEffect(()=>{if(!s)return;const o=setInterval(()=>{const n=Date.now(),c=n-h.current,S=Math.max(0,c-500);g(S),h.current=n},500);return()=>clearInterval(o)},[s]),t.useEffect(()=>{if(!s)return;const o=setInterval(()=>{try{v(H.getQueueStats());const n=performance;if(n.memory){const c=n.memory.usedJSHeapSize;C(Math.round(c/1024/1024))}}catch(n){console.error("PerfHUD Error:",n)}},500);return()=>clearInterval(o)},[s]),t.useEffect(()=>{if(!s)return;let o;const n=()=>{d.current++;const c=Date.now();c-x.current>=1e3&&(w(d.current),d.current=0,x.current=c),o=requestAnimationFrame(n)};return o=requestAnimationFrame(n),()=>cancelAnimationFrame(o)},[s]);const D=()=>{localStorage.removeItem("nahan_force_perf_hud"),f(!1)};if(!s)return null;const p=l>50,F=m>250,u=a.activeTasks>0||a.processingQueueLength>0||a.storageQueueLength>0,N=!p&&!F,y={position:"fixed",bottom:"20px",right:"20px",backgroundColor:p?"rgba(80, 0, 0, 0.95)":"rgba(10, 10, 10, 0.85)",color:"#e5e5e5",padding:"12px",borderRadius:"12px",fontSize:"11px",fontFamily:"Menlo, Monaco, Consolas, monospace",zIndex:9999,minWidth:r==="compact"?"auto":"220px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(12px)",display:"flex",flexDirection:"column",gap:"8px",transition:"all 0.3s ease"},k={display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:r==="full"?"1px solid rgba(255, 255, 255, 0.1)":"none",paddingBottom:r==="full"?"8px":"0",marginBottom:r==="full"?"4px":"0"};return e.jsxs("div",{"trae-inspector-start-line":"149","trae-inspector-start-column":"8","trae-inspector-end-line":"233","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D","data-testid":`perf-hud-${r}`,style:y,children:[e.jsxs("div",{"trae-inspector-start-line":"151","trae-inspector-start-column":"12","trae-inspector-end-line":"173","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:k,children:[e.jsxs("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"16","trae-inspector-end-line":"155","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"flex",alignItems:"center",gap:"6px",fontWeight:"bold",color:"#fff"},children:[e.jsx(P,{size:14,className:N?"text-green-400":"text-red-400"}),e.jsx("span",{"trae-inspector-start-line":"154","trae-inspector-start-column":"20","trae-inspector-end-line":"154","trae-inspector-end-column":"41","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PERF%20HUD%22%2C%22textStartLine%22%3A%22154%22%2C%22textStartColumn%22%3A%2226%22%2C%22textEndLine%22%3A%22154%22%2C%22textEndColumn%22%3A%2234%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",children:"PERF HUD"})]}),e.jsxs("div",{"trae-inspector-start-line":"156","trae-inspector-start-column":"16","trae-inspector-end-line":"172","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"flex",gap:"4px"},children:[e.jsx("button",{"trae-inspector-start-line":"157","trae-inspector-start-column":"20","trae-inspector-end-line":"163","trae-inspector-end-column":"29","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",onClick:()=>A(r==="full"?"compact":"full"),style:{background:"none",border:"none",color:"#999",cursor:"pointer",padding:"4px"},title:r==="full"?"Compact":"Expand",children:r==="full"?e.jsx(U,{size:14}):e.jsx(B,{size:14})}),e.jsx("button",{"trae-inspector-start-line":"164","trae-inspector-start-column":"20","trae-inspector-end-line":"171","trae-inspector-end-column":"29","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",onClick:D,style:{background:"none",border:"none",color:"#999",cursor:"pointer",padding:"4px"},title:"Close","data-testid":"perf-hud-close",children:e.jsx(b,{size:14})})]})]}),r==="compact"&&e.jsxs("div",{"trae-inspector-start-line":"177","trae-inspector-start-column":"16","trae-inspector-end-line":"184","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"flex",gap:"12px",alignItems:"center",fontSize:"12px"},children:[e.jsxs("div",{"trae-inspector-start-line":"178","trae-inspector-start-column":"20","trae-inspector-end-line":"180","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:i<30?"#ef4444":"#22c55e",fontWeight:"bold"},children:[i," FPS"]}),e.jsxs("div",{"trae-inspector-start-line":"181","trae-inspector-start-column":"20","trae-inspector-end-line":"183","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:p?"#ef4444":"#22c55e"},children:["Lag: ",l,"ms"]})]}),r==="full"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{"trae-inspector-start-line":"190","trae-inspector-start-column":"20","trae-inspector-end-line":"205","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px"},children:[e.jsx("div",{"trae-inspector-start-line":"191","trae-inspector-start-column":"24","trae-inspector-end-line":"191","trae-inspector-end-column":"64","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22FPS%22%2C%22textStartLine%22%3A%22191%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22191%22%2C%22textEndColumn%22%3A%2258%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#888"},children:"FPS"}),e.jsx("div",{"trae-inspector-start-line":"192","trae-inspector-start-column":"24","trae-inspector-end-line":"194","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:i<30?"#ef4444":"#22c55e",fontWeight:"bold",textAlign:"right"},children:i}),e.jsx("div",{"trae-inspector-start-line":"196","trae-inspector-start-column":"24","trae-inspector-end-line":"196","trae-inspector-end-column":"69","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loop%20Lag%22%2C%22textStartLine%22%3A%22196%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22196%22%2C%22textEndColumn%22%3A%2263%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#888"},children:"Loop Lag"}),e.jsxs("div",{"trae-inspector-start-line":"197","trae-inspector-start-column":"24","trae-inspector-end-line":"199","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:p?"#ef4444":"#22c55e",textAlign:"right"},children:[l,"ms"]}),e.jsx("div",{"trae-inspector-start-line":"201","trae-inspector-start-column":"24","trae-inspector-end-line":"201","trae-inspector-end-column":"68","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22JS%20Heap%22%2C%22textStartLine%22%3A%22201%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22201%22%2C%22textEndColumn%22%3A%2262%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#888"},children:"JS Heap"}),e.jsx("div",{"trae-inspector-start-line":"202","trae-inspector-start-column":"24","trae-inspector-end-line":"204","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:F?"#ef4444":"#22c55e",textAlign:"right"},children:m>0?`${m} MB`:"N/A"})]}),e.jsxs("div",{"trae-inspector-start-line":"207","trae-inspector-start-column":"20","trae-inspector-end-line":"230","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{marginTop:"4px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("div",{"trae-inspector-start-line":"208","trae-inspector-start-column":"24","trae-inspector-end-line":"219","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{"trae-inspector-start-line":"209","trae-inspector-start-column":"28","trae-inspector-end-line":"209","trae-inspector-end-column":"74","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22WORKERS%22%2C%22textStartLine%22%3A%22209%22%2C%22textStartColumn%22%3A%2260%22%2C%22textEndLine%22%3A%22209%22%2C%22textEndColumn%22%3A%2267%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#888"},children:"WORKERS"}),e.jsx("span",{"trae-inspector-start-line":"210","trae-inspector-start-column":"28","trae-inspector-end-line":"218","trae-inspector-end-column":"35","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:u?"#f59e0b":"#22c55e",fontSize:"10px",padding:"2px 6px",borderRadius:"4px",background:u?"rgba(245, 158, 11, 0.1)":"rgba(34, 197, 94, 0.1)"},children:u?"BUSY":"IDLE"})]}),e.jsxs("div",{"trae-inspector-start-line":"220","trae-inspector-start-column":"24","trae-inspector-end-line":"229","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:"10px"},children:[e.jsx("div",{"trae-inspector-start-line":"221","trae-inspector-start-column":"28","trae-inspector-end-line":"221","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Active%20Tasks%22%2C%22textStartLine%22%3A%22221%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22221%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#666"},children:"Active Tasks"}),e.jsx("div",{"trae-inspector-start-line":"222","trae-inspector-start-column":"28","trae-inspector-end-line":"222","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{textAlign:"right"},children:a.activeTasks}),e.jsx("div",{"trae-inspector-start-line":"224","trae-inspector-start-column":"28","trae-inspector-end-line":"224","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Queue%20(Proc)%22%2C%22textStartLine%22%3A%22224%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22224%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#666"},children:"Queue (Proc)"}),e.jsx("div",{"trae-inspector-start-line":"225","trae-inspector-start-column":"28","trae-inspector-end-line":"225","trae-inspector-end-column":"105","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{textAlign:"right"},children:a.processingQueueLength}),e.jsx("div",{"trae-inspector-start-line":"227","trae-inspector-start-column":"28","trae-inspector-end-line":"227","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Queue%20(Stor)%22%2C%22textStartLine%22%3A%22227%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22227%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#666"},children:"Queue (Stor)"}),e.jsx("div",{"trae-inspector-start-line":"228","trae-inspector-start-column":"28","trae-inspector-end-line":"228","trae-inspector-end-column":"102","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{textAlign:"right"},children:a.storageQueueLength})]})]})]})]})};export{I as PerfHUD};
