import{c as b,r,w as q,j as e,A as K,M as G,X as Z}from"./index-DyP8r9wf.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],te=b("grip-vertical",ee);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],ne=b("minimize-2",re),se=()=>{const[c,L]=r.useState(()=>{if(typeof navigator<"u"&&navigator.webdriver)return!1;const t=localStorage.getItem("nahan_perf_hud_visible");return localStorage.getItem("nahan_force_perf_hud")==="true"?!0:t!==null?t==="true":!1});r.useEffect(()=>{localStorage.setItem("nahan_perf_hud_visible",String(c))},[c]);const[o,H]=r.useState(()=>localStorage.getItem("nahan_perf_hud_mode")==="compact"?"compact":"full"),[i,E]=r.useState(()=>{const t=localStorage.getItem("nahan_perf_hud_pos");if(t)try{return JSON.parse(t)}catch{}return{y:100,side:"right"}}),[p,y]=r.useState(!1),F=r.useRef({x:0,y:0}),m=r.useRef(null),l=r.useRef(null),[g,B]=r.useState(0),D=r.useRef(Date.now()),[f,P]=r.useState(60),w=r.useRef(0),C=r.useRef(Date.now()),[u,U]=r.useState({storageQueueLength:0,processingQueueLength:0,activeTasks:0}),[v,_]=r.useState(0);r.useEffect(()=>{localStorage.setItem("nahan_perf_hud_mode",o)},[o]),r.useEffect(()=>{localStorage.setItem("nahan_perf_hud_pos",JSON.stringify(i))},[i]),r.useEffect(()=>{if(!c)return;const t=setInterval(()=>{const n=Date.now(),s=n-D.current,d=Math.max(0,s-500);B(d),D.current=n},500);return()=>clearInterval(t)},[c]),r.useEffect(()=>{if(!c)return;const t=setInterval(()=>{try{U(q.getQueueStats());const n=performance;if(n.memory){const s=n.memory.usedJSHeapSize;_(Math.round(s/1024/1024))}}catch(n){console.error("PerfHUD Error:",n)}},500);return()=>clearInterval(t)},[c]),r.useEffect(()=>{if(!c)return;let t;const n=()=>{w.current++;const s=Date.now();s-C.current>=1e3&&(P(w.current),w.current=0,C.current=s),t=requestAnimationFrame(n)};return t=requestAnimationFrame(n),()=>cancelAnimationFrame(t)},[c]);const N=(t,n)=>{l.current&&(F.current={x:t,y:n},m.current=l.current.getBoundingClientRect(),y(!0))},S=(t,n)=>{if(!p||!l.current||!m.current)return;const s=t-F.current.x,d=n-F.current.y,a=m.current,h=window.innerWidth,Q=window.innerHeight,X=-a.left+5,Y=h-a.right-5,$=-a.top+5,J=Q-a.bottom-5,V=Math.max(X,Math.min(Y,s)),O=Math.max($,Math.min(J,d));l.current.style.transform=`translate3d(${V}px, ${O}px, 0)`},k=()=>{if(!p||!l.current||!m.current)return;y(!1);const t=l.current.getBoundingClientRect(),n=window.innerWidth,s=window.innerHeight,d=t.left+t.width/2;l.current.style.transform="";const a=d<n/2?"left":"right";let h=t.top;h=Math.max(10,Math.min(s-t.height-10,h)),E({y:h,side:a})},M=t=>{N(t.clientX,t.clientY)},R=t=>{N(t.touches[0].clientX,t.touches[0].clientY)};r.useEffect(()=>{const t=a=>S(a.clientX,a.clientY),n=()=>p&&k(),s=a=>{p&&a.preventDefault(),S(a.touches[0].clientX,a.touches[0].clientY)},d=()=>p&&k();return p&&(window.addEventListener("mousemove",t),window.addEventListener("mouseup",n),window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",d)),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchmove",s),window.removeEventListener("touchend",d)}},[p]);const I=()=>{localStorage.removeItem("nahan_force_perf_hud"),L(!1)};if(!c)return null;const x=g>50,j=v>250,A=u.activeTasks>0||u.processingQueueLength>0||u.storageQueueLength>0,T=!x&&!j,z={position:"fixed",top:`${i.y}px`,left:i.side==="left"?"0":"auto",right:i.side==="right"?"0":"auto",backgroundColor:x?"rgba(80, 0, 0, 0.95)":"rgba(10, 10, 10, 0.90)",color:"#e5e5e5",padding:"12px",fontSize:"11px",fontFamily:"Menlo, Monaco, Consolas, monospace",zIndex:9999,minWidth:o==="compact"?"auto":"220px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(12px)",display:"flex",flexDirection:"column",gap:"8px",transition:p?"none":"all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)",borderTopRightRadius:i.side==="left"?"12px":"0",borderBottomRightRadius:i.side==="left"?"12px":"0",borderTopLeftRadius:i.side==="right"?"12px":"0",borderBottomLeftRadius:i.side==="right"?"12px":"0",userSelect:"none",touchAction:"none"},W={display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:o==="full"?"1px solid rgba(255, 255, 255, 0.1)":"none",paddingBottom:o==="full"?"8px":"0",marginBottom:o==="full"?"4px":"0"};return e.jsxs("div",{"trae-inspector-start-line":"296","trae-inspector-start-column":"8","trae-inspector-end-line":"400","trae-inspector-end-column":"14","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",ref:l,"data-testid":`perf-hud-${o}`,style:z,children:[e.jsxs("div",{"trae-inspector-start-line":"302","trae-inspector-start-column":"12","trae-inspector-end-line":"340","trae-inspector-end-column":"18","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:W,children:[e.jsxs("div",{"trae-inspector-start-line":"304","trae-inspector-start-column":"16","trae-inspector-end-line":"321","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",onMouseDown:M,onTouchStart:R,style:{display:"flex",alignItems:"center",gap:"6px",cursor:p?"grabbing":"grab",padding:"4px",flex:1},children:[e.jsx(te,{size:14,color:"#666"}),e.jsxs("div",{"trae-inspector-start-line":"317","trae-inspector-start-column":"20","trae-inspector-end-line":"320","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"flex",alignItems:"center",gap:"6px",fontWeight:"bold",color:"#fff"},children:[e.jsx(K,{size:14,className:T?"text-green-400":"text-red-400"}),o==="full"&&e.jsx("span",{"trae-inspector-start-line":"319","trae-inspector-start-column":"44","trae-inspector-end-line":"319","trae-inspector-end-column":"65","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22PERF%20HUD%22%2C%22textStartLine%22%3A%22319%22%2C%22textStartColumn%22%3A%2250%22%2C%22textEndLine%22%3A%22319%22%2C%22textEndColumn%22%3A%2258%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",children:"PERF HUD"})]})]}),e.jsxs("div",{"trae-inspector-start-line":"323","trae-inspector-start-column":"16","trae-inspector-end-line":"339","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"flex",gap:"4px"},children:[e.jsx("button",{"trae-inspector-start-line":"324","trae-inspector-start-column":"20","trae-inspector-end-line":"330","trae-inspector-end-column":"29","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",onClick:()=>H(o==="full"?"compact":"full"),style:{background:"none",border:"none",color:"#999",cursor:"pointer",padding:"4px"},title:o==="full"?"Compact":"Expand",children:o==="full"?e.jsx(ne,{size:14}):e.jsx(G,{size:14})}),e.jsx("button",{"trae-inspector-start-line":"331","trae-inspector-start-column":"20","trae-inspector-end-line":"338","trae-inspector-end-column":"29","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",onClick:I,style:{background:"none",border:"none",color:"#999",cursor:"pointer",padding:"4px"},title:"Close","data-testid":"perf-hud-close",children:e.jsx(Z,{size:14})})]})]}),o==="compact"&&e.jsxs("div",{"trae-inspector-start-line":"344","trae-inspector-start-column":"16","trae-inspector-end-line":"351","trae-inspector-end-column":"22","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"flex",gap:"12px",alignItems:"center",fontSize:"12px",paddingLeft:"8px"},children:[e.jsxs("div",{"trae-inspector-start-line":"345","trae-inspector-start-column":"20","trae-inspector-end-line":"347","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:f<30?"#ef4444":"#22c55e",fontWeight:"bold"},children:[f," FPS"]}),e.jsxs("div",{"trae-inspector-start-line":"348","trae-inspector-start-column":"20","trae-inspector-end-line":"350","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:x?"#ef4444":"#22c55e"},children:["Lag: ",g,"ms"]})]}),o==="full"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{"trae-inspector-start-line":"357","trae-inspector-start-column":"20","trae-inspector-end-line":"372","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px"},children:[e.jsx("div",{"trae-inspector-start-line":"358","trae-inspector-start-column":"24","trae-inspector-end-line":"358","trae-inspector-end-column":"64","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22FPS%22%2C%22textStartLine%22%3A%22358%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22358%22%2C%22textEndColumn%22%3A%2258%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#888"},children:"FPS"}),e.jsx("div",{"trae-inspector-start-line":"359","trae-inspector-start-column":"24","trae-inspector-end-line":"361","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:f<30?"#ef4444":"#22c55e",fontWeight:"bold",textAlign:"right"},children:f}),e.jsx("div",{"trae-inspector-start-line":"363","trae-inspector-start-column":"24","trae-inspector-end-line":"363","trae-inspector-end-column":"69","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Loop%20Lag%22%2C%22textStartLine%22%3A%22363%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22363%22%2C%22textEndColumn%22%3A%2263%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#888"},children:"Loop Lag"}),e.jsxs("div",{"trae-inspector-start-line":"364","trae-inspector-start-column":"24","trae-inspector-end-line":"366","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:x?"#ef4444":"#22c55e",textAlign:"right"},children:[g,"ms"]}),e.jsx("div",{"trae-inspector-start-line":"368","trae-inspector-start-column":"24","trae-inspector-end-line":"368","trae-inspector-end-column":"68","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22JS%20Heap%22%2C%22textStartLine%22%3A%22368%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22368%22%2C%22textEndColumn%22%3A%2262%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#888"},children:"JS Heap"}),e.jsx("div",{"trae-inspector-start-line":"369","trae-inspector-start-column":"24","trae-inspector-end-line":"371","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:j?"#ef4444":"#22c55e",textAlign:"right"},children:v>0?`${v} MB`:"N/A"})]}),e.jsxs("div",{"trae-inspector-start-line":"374","trae-inspector-start-column":"20","trae-inspector-end-line":"397","trae-inspector-end-column":"26","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{marginTop:"4px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("div",{"trae-inspector-start-line":"375","trae-inspector-start-column":"24","trae-inspector-end-line":"386","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{"trae-inspector-start-line":"376","trae-inspector-start-column":"28","trae-inspector-end-line":"376","trae-inspector-end-column":"74","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22WORKERS%22%2C%22textStartLine%22%3A%22376%22%2C%22textStartColumn%22%3A%2260%22%2C%22textEndLine%22%3A%22376%22%2C%22textEndColumn%22%3A%2267%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#888"},children:"WORKERS"}),e.jsx("span",{"trae-inspector-start-line":"377","trae-inspector-start-column":"28","trae-inspector-end-line":"385","trae-inspector-end-column":"35","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:A?"#f59e0b":"#22c55e",fontSize:"10px",padding:"2px 6px",borderRadius:"4px",background:A?"rgba(245, 158, 11, 0.1)":"rgba(34, 197, 94, 0.1)"},children:A?"BUSY":"IDLE"})]}),e.jsxs("div",{"trae-inspector-start-line":"387","trae-inspector-start-column":"24","trae-inspector-end-line":"396","trae-inspector-end-column":"30","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:"10px"},children:[e.jsx("div",{"trae-inspector-start-line":"388","trae-inspector-start-column":"28","trae-inspector-end-line":"388","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Active%20Tasks%22%2C%22textStartLine%22%3A%22388%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22388%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#666"},children:"Active Tasks"}),e.jsx("div",{"trae-inspector-start-line":"389","trae-inspector-start-column":"28","trae-inspector-end-line":"389","trae-inspector-end-column":"95","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{textAlign:"right"},children:u.activeTasks}),e.jsx("div",{"trae-inspector-start-line":"391","trae-inspector-start-column":"28","trae-inspector-end-line":"391","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Queue%20(Proc)%22%2C%22textStartLine%22%3A%22391%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22391%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#666"},children:"Queue (Proc)"}),e.jsx("div",{"trae-inspector-start-line":"392","trae-inspector-start-column":"28","trae-inspector-end-line":"392","trae-inspector-end-column":"105","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{textAlign:"right"},children:u.processingQueueLength}),e.jsx("div",{"trae-inspector-start-line":"394","trae-inspector-start-column":"28","trae-inspector-end-line":"394","trae-inspector-end-column":"77","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Queue%20(Stor)%22%2C%22textStartLine%22%3A%22394%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22394%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{color:"#666"},children:"Queue (Stor)"}),e.jsx("div",{"trae-inspector-start-line":"395","trae-inspector-start-column":"28","trae-inspector-end-line":"395","trae-inspector-end-column":"102","trae-inspector-file-path":"src/components/dev/PerfHUD.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22%2Fhome%2Frunner%2Fwork%2FNahan%2FNahan%22%7D",style:{textAlign:"right"},children:u.storageQueueLength})]})]})]})]})};export{se as PerfHUD};
